{"cells":[{"cell_type":"markdown","source":["# Задание:\n","### Используйте ниже приведенные ссылки на PDF файлы вакансии и резюме на позицию HR Директора.\n","### 1) Сформируйте 10 \"Ключевых требований к кандидату\" на основании вакансии для последующего анализа (нужно сформировать промпты, с указанием вакансии, отправить запрос к OpenAI вывести и сохранить ответ).\n","### 2) На основании сгенерированных \"Ключевых требований к кандидату\", текста вакансии и текста резюме Критично оцените, насколько кандидат подходит на указанную вакансию (нужно сформировать промпты, с указанием вакансии, резюме и Ключевых требовании к вакансии, отправить запрос к OpenAI и вывести ответ)."],"metadata":{"id":"78SM20xTyKlL"}},{"cell_type":"code","source":["#@title Ссылки на файлы вакансии и резюме на позицию HR Директора\n","\n","# Файл резюме\n","resume_link = 'https://disk.yandex.ru/i/ULV_Onsdrx7zrw'\n","\n","# Файл вакансии\n","vacancy_link = 'https://disk.yandex.ru/i/Lg7ZhWiutBVpXg'"],"metadata":{"id":"Dk1Y7N_Mo1Tv","executionInfo":{"status":"ok","timestamp":1760006562308,"user_tz":-180,"elapsed":3,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"execution_count":47,"outputs":[]},{"cell_type":"code","source":["#@title Установка необходимых библиотек\n","!pip install -q openai==1.59.9 langchain==0.3.16 langchain_community==0.3.16 \\\n","langchain_openai==0.3.2 langchain_core==0.3.32 faiss-cpu==1.9.0.post1 \\\n","rarfile==4.2 PyPDF2==3.0.1 pydub==0.25.1 pdfplumber\n"],"metadata":{"id":"KZ2vIXyYi-Es","executionInfo":{"status":"ok","timestamp":1760006575762,"user_tz":-180,"elapsed":13430,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"execution_count":48,"outputs":[]},{"cell_type":"code","source":["#@title Импорт библиотек, активация ключей, папки, глобальные переменные\n","\n","from langchain.text_splitter import MarkdownHeaderTextSplitter\n","from langchain_core.output_parsers import JsonOutputParser\n","from langchain_openai import OpenAIEmbeddings, ChatOpenAI\n","from langchain_core.pydantic_v1 import BaseModel, Field\n","from langchain_community.vectorstores import FAISS\n","from langchain.docstore.document import Document\n","from langchain.prompts import PromptTemplate\n","\n","from pydub import AudioSegment\n","from io import BytesIO\n","import aiohttp\n","from google.colab import userdata, drive\n","from PyPDF2 import PdfReader\n","from IPython.display import Audio, display, clear_output\n","from datetime import datetime\n","import requests\n","from urllib.parse import urlencode\n","import textwrap\n","import rarfile\n","import openai\n","import gdown\n","import json\n","import time\n","import os\n","import re\n","\n","# Подключаем ГуглДиск для работы с файлами\n","drive.mount('/content/drive')\n","# Формируем основной путь\n","path = '/content/drive/MyDrive/data/hr/'\n","# Формирование дополнительных путей\n","path_vacancies_pdf = f'{path}vacancies_pdf/'\n","path_vacancies_json = f'{path}vacancies_json/'\n","path_resumes_pdf = f'{path}resumes_pdf/'\n","path_resumes_json = f'{path}resumeses_json/'\n","path_db_faiss = f'{path}db_faiss/'\n","path_add_data = f'{path}add_data/'\n","\n","folders = [path, path_vacancies_pdf, path_vacancies_json, path_resumes_pdf,\n","           path_resumes_json, path_db_faiss, path_add_data ]\n","# Создание необходимых папок на ГуглДиске: '/data/hr/...'\n","for folder in folders:\n","    os.makedirs(folder, exist_ok=True)\n","\n","# Cоздание или очистка файла логов, если файл уже есть\n","open(os.path.join(path, '_log.txt'), 'w').close()"],"metadata":{"id":"L8c1fZubi9xv","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1760006577474,"user_tz":-180,"elapsed":1697,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}},"outputId":"25c61553-1824-4039-c9e2-1a944491acbb"},"execution_count":49,"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(\"/content/drive\", force_remount=True).\n"]}]},{"cell_type":"code","source":["# Получаем ключ API из переменной окружения\n","api_key = userdata.get('API_KEY')\n","\n","# Настройка базового URL\n","base_url = \"https://api.vsegpt.ru/v1\"\n","\n","# Настройка модели\n","model_config = {\n","    \"title\": \"o4-mini (vsegpt)\",\n","    \"provider\": \"openai\",\n","    \"model\": \"openai/o4-mini\",\n","    \"apiBase\": base_url,\n","    \"apiType\": \"openai\",\n","    \"apiKey\": api_key,  # Используем определенный api_key\n","    \"useLegacyCompletionsEndpoint\": False\n","}\n","\n","# Инициализация клиента OpenAI\n","client = openai.OpenAI(\n","    api_key=model_config[\"apiKey\"],\n","    base_url=model_config[\"apiBase\"],\n",")\n","\n","# Для использования TTS (text to speech) от Yandex https://auth.yandex.cloud/login\n","api_key_yandex = userdata.get('YANDEX_API_KEY')\n","folder_id_yandex = userdata.get('YANDEX_FOLDER_ID')\n","\n","# Cоздание или очистка файла логов, если файл уже есть\n","open(os.path.join(path, '_log.txt'), 'w').close()\n","clear_output() # очистка вывода"],"metadata":{"id":"B60hx0AUCiEV","executionInfo":{"status":"ok","timestamp":1760006578893,"user_tz":-180,"elapsed":1403,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"execution_count":50,"outputs":[]},{"cell_type":"code","source":["import io\n","import PyPDF2\n","\n","# Функция для скачивания PDF по ссылке и извлечения текста\n","def download_pdf_text(url):\n","    response = requests.get(url)\n","    response.raise_for_status()\n","    with io.BytesIO(response.content) as pdf_file:\n","        reader = PyPDF2.PdfReader(pdf_file)\n","        text = ''\n","        for page in reader.pages:\n","            text += page.extract_text()\n","    return text\n","\n","# Ссылки на файлы\n","vacancy_url = 'https://disk.yandex.ru/i/Lg7ZhWiutBVpXg'\n","resume_url = 'https://disk.yandex.ru/i/ULV_Onsdrx7zrw'\n","\n","# Получение текста из PDF\n","vacancy_text = download_pdf_text(vacancy_url)\n","resume_text = download_pdf_text(resume_url)\n","\n","\n","# 1. Получение 10 ключевых требований к кандидату\n","prompt_requirements = f\"\"\"\n","Проанализируйте следующую вакансию и сформируйте 10 ключевых требований к кандидату, которые должны быть выполнены для успешного выполнения этой работы.\n","\n","Вакансия:\n","\\\"\\\"\\\"{vacancy_text}\\\"\\\"\\\"\n","\n","Требования:\n","\"\"\"\n","\n","response_requirements = openai.ChatCompletion.create(\n","    model=openai/gpt4o-mini,\n","    messages=[\n","        {\"role\": \"system\", \"content\": \"Вы эксперт по подбору персонала.\"},\n","        {\"role\": \"user\", \"content\": prompt_requirements}\n","    ],\n","    temperature=0.7,\n","    max_tokens=500\n",")\n","\n","key_requirements = response_requirements.choices[0].message['content']\n","print(\"Ключевые требования к кандидату:\\n\", key_requirements)\n","\n","# 2. Критическая оценка соответствия кандидата\n","prompt_evaluation = f\"\"\"\n","Проанализируйте следующую вакансию, ключевые требования к кандидату и резюме кандидата.\n","\n","Вакансия:\n","\\\"\\\"\\\"{vacancy_text}\\\"\\\"\\\"\n","\n","Ключевые требования:\n","\\\"\\\"\\\"{key_requirements}\\\"\\\"\\\"\n","\n","Резюме кандидата:\n","\\\"\\\"\\\"{resume_text}\\\"\\\"\\\"\n","\n","На основе этого критически оцените, насколько кандидат подходит на указанную вакансию, и укажите свои рекомендации и уровень соответствия.\n","\"\"\"\n","\n","response_evaluation = openai.ChatCompletion.create(\n","    model=openai/gpt4o-mini,\n","    messages=[\n","        {\"role\": \"system\", \"content\": \"Вы эксперт по оценке соответствия кандидатов вакансиям.\"},\n","        {\"role\": \"user\", \"content\": prompt_evaluation}\n","    ],\n","    temperature=0.7,\n","    max_tokens=700\n",")\n","\n","evaluation_result = response_evaluation.choices[0].message['content']\n","print(\"\\nОценка соответствия кандидата:\\n\", evaluation_result)"],"metadata":{"id":"EzZfCzlDk0Li","executionInfo":{"status":"error","timestamp":1760006579561,"user_tz":-180,"elapsed":652,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}},"colab":{"base_uri":"https://localhost:8080/","height":356},"outputId":"69af4c3a-3d3c-4ae9-a764-2ef042264110"},"execution_count":51,"outputs":[{"output_type":"error","ename":"PdfReadError","evalue":"EOF marker not found","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mPdfReadError\u001b[0m                              Traceback (most recent call last)","\u001b[0;32m/tmp/ipython-input-2404574732.py\u001b[0m in \u001b[0;36m<cell line: 0>\u001b[0;34m()\u001b[0m\n\u001b[1;32m     18\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     19\u001b[0m \u001b[0;31m# Получение текста из PDF\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m---> 20\u001b[0;31m \u001b[0mvacancy_text\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mdownload_pdf_text\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mvacancy_url\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     21\u001b[0m \u001b[0mresume_text\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mdownload_pdf_text\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mresume_url\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     22\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/tmp/ipython-input-2404574732.py\u001b[0m in \u001b[0;36mdownload_pdf_text\u001b[0;34m(url)\u001b[0m\n\u001b[1;32m      7\u001b[0m     \u001b[0mresponse\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mraise_for_status\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      8\u001b[0m     \u001b[0;32mwith\u001b[0m \u001b[0mio\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mBytesIO\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mresponse\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mcontent\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mpdf_file\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 9\u001b[0;31m         \u001b[0mreader\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mPyPDF2\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mPdfReader\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mpdf_file\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     10\u001b[0m         \u001b[0mtext\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0;34m''\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     11\u001b[0m         \u001b[0;32mfor\u001b[0m \u001b[0mpage\u001b[0m \u001b[0;32min\u001b[0m \u001b[0mreader\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mpages\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.12/dist-packages/PyPDF2/_reader.py\u001b[0m in \u001b[0;36m__init__\u001b[0;34m(self, stream, strict, password)\u001b[0m\n\u001b[1;32m    317\u001b[0m             \u001b[0;32mwith\u001b[0m \u001b[0mopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mstream\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m\"rb\"\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mfh\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    318\u001b[0m                 \u001b[0mstream\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mBytesIO\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mfh\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mread\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 319\u001b[0;31m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mread\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mstream\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    320\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mstream\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mstream\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    321\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.12/dist-packages/PyPDF2/_reader.py\u001b[0m in \u001b[0;36mread\u001b[0;34m(self, stream)\u001b[0m\n\u001b[1;32m   1413\u001b[0m     \u001b[0;32mdef\u001b[0m \u001b[0mread\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mstream\u001b[0m\u001b[0;34m:\u001b[0m \u001b[0mStreamType\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;34m->\u001b[0m \u001b[0;32mNone\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1414\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0m_basic_validation\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mstream\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m-> 1415\u001b[0;31m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0m_find_eof_marker\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mstream\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m   1416\u001b[0m         \u001b[0mstartxref\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0m_find_startxref_pos\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mstream\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1417\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.12/dist-packages/PyPDF2/_reader.py\u001b[0m in \u001b[0;36m_find_eof_marker\u001b[0;34m(self, stream)\u001b[0m\n\u001b[1;32m   1469\u001b[0m         \u001b[0;32mwhile\u001b[0m \u001b[0mline\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;36m5\u001b[0m\u001b[0;34m]\u001b[0m \u001b[0;34m!=\u001b[0m \u001b[0;34mb\"%%EOF\"\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1470\u001b[0m             \u001b[0;32mif\u001b[0m \u001b[0mstream\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtell\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;34m<\u001b[0m \u001b[0mlast_mb\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m-> 1471\u001b[0;31m                 \u001b[0;32mraise\u001b[0m \u001b[0mPdfReadError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"EOF marker not found\"\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m   1472\u001b[0m             \u001b[0mline\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mread_previous_line\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mstream\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1473\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mPdfReadError\u001b[0m: EOF marker not found"]}]},{"cell_type":"code","source":["import requests\n","from bs4 import BeautifulSoup\n","import re\n","\n","def get_direct_link(yandex_url):\n","    headers = {\n","        'User-Agent': 'Mozilla/5.0'\n","    }\n","    response = requests.get(yandex_url, headers=headers)\n","    response.raise_for_status()\n","    soup = BeautifulSoup(response.text, 'html.parser')\n","\n","    # Попытка найти ссылку на файл\n","    link_tags = soup.find_all('a', href=True)\n","    for tag in link_tags:\n","        href = tag['href']\n","        # Проверяем, что ссылка ведет на PDF\n","        if '.pdf' in href:\n","            # Возможно, ссылка относительная\n","            if href.startswith('http'):\n","                return href\n","            else:\n","                # Формируем полный URL\n","                base_url = 'https://disk.yandex.ru'\n","                return base_url + href\n","    return None\n","\n","def download_file(url, filename):\n","    response = requests.get(url, stream=True)\n","    response.raise_for_status()\n","    with open(filename, 'wb') as f:\n","        for chunk in response.iter_content(1024):\n","            f.write(chunk)\n","    print(f'Файл сохранен как {filename}')\n","\n","# Основной поток\n","vacancy_link = 'https://disk.yandex.ru/i/jTXBEZZ-SQg-Ig'  # Ваша ссылка\n","direct_link = get_direct_link(vacancy_link)\n","\n","if direct_link:\n","    print('Нашел прямую ссылку:', direct_link)\n","    download_file(direct_link, 'downloaded.pdf')\n","else:\n","    print('Не удалось найти прямую ссылку на PDF.')"],"metadata":{"id":"qEi1whPHMi3b","executionInfo":{"status":"aborted","timestamp":1760006579545,"user_tz":-180,"elapsed":17405,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["# Решение"],"metadata":{"id":"2bl3ZiJarjxG"}},{"cell_type":"code","source":["#@title Загрузка PDF файлов вакансий и резюме\n","\n","# Загрузка PDF файлов вакансий в RAR архиве\n","rar_vacancies = 'https://disk.yandex.ru/i/s6VDx9qqsXnXAA'\n","download_from_yandex_disk(rar_vacancies, path_vacancies_pdf)\n","unrar(path_vacancies_pdf) # разархивирование PDF вакансий в ту же папку\n","\n","# Загрузка PDF файлов резюме в RAR архиве\n","rar_resumes = 'https://disk.yandex.ru/i/EAJaUWtD0Sz_QA'\n","download_from_yandex_disk(rar_resumes, path_resumes_pdf)\n","unrar(path_resumes_pdf) # разархивирование PDF резюме в ту же папку"],"metadata":{"id":"CSUvj-qJqpue","executionInfo":{"status":"aborted","timestamp":1760006579559,"user_tz":-180,"elapsed":17417,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["import pdfplumber\n","\n","def extract_text_from_pdf(pdf_path):\n","    text = \"\"\n","    with pdfplumber.open(pdf_path) as pdf:\n","        for page in pdf.pages:\n","            text += page.extract_text() + \"\\n\"\n","    return text\n","\n","# Пример использования\n","pdf_path = resume_link\n","text = extract_text_from_pdf(pdf_path)\n","print(text)"],"metadata":{"id":"2IW3vN_mFAOH","executionInfo":{"status":"aborted","timestamp":1760006579578,"user_tz":-180,"elapsed":17434,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"execution_count":null,"outputs":[]},{"cell_type":"code","metadata":{"id":"37fc76a9","executionInfo":{"status":"aborted","timestamp":1760006579580,"user_tz":-180,"elapsed":0,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"source":["#@title Парсинг PDF, создания векторных баз\n","\n","# Cоздание или очистка файла логов\n","open(os.path.join(path, '_log.txt'), 'w').close()\n","\n","# Парсинг PDF файлов вакансий и резюме. Формирование чанков. Сохранение в Json\n","chunks_vacancies = pdf_to_json_and_chunks_vacancies(path_vacancies_pdf)\n","chunks_resumes = pdf_to_json_and_chunks_resumes(path_resumes_pdf)\n","\n","# Создание и сохранение векторной базы вакансий для последующего релевантного поиска\n","db_vacancies = FAISS.from_documents(chunks_vacancies, OpenAIEmbeddings(openai_api_key=model_config[\"apiKey\"], openai_api_base = model_config[\"apiBase\"]))\n","db_vacancies.save_local(folder_path=path_db_faiss, index_name='db_vacancies')\n","\n","# Создание и сохранение векторной базы резюме для последующего релевантного поиска\n","db_resumes = FAISS.from_documents(chunks_resumes, OpenAIEmbeddings())\n","db_resumes.save_local(folder_path=path_db_faiss, index_name='db_resumes')"],"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title Парсинг PDF, создания векторных баз\n","\n","# Cоздание или очистка файла логов\n","open(os.path.join(path, '_log.txt'), 'w').close()\n","\n","# Парсинг PDF файлов вакансий и резюме. Формирование чанков. Сохранение в Json\n","chunks_vacancies = pdf_to_json_and_chunks_vacancies(path_vacancies_pdf)\n","chunks_resumes = pdf_to_json_and_chunks_resumes(path_resumes_pdf)\n","\n","# Создание и сохранение векторной базы вакансий для последующего релевантного поиска\n","db_vacancies = FAISS.from_documents(chunks_vacancies, OpenAIEmbeddings(openai_api_key=model_config[\"apiKey\"], openai_api_base = model_config[\"apiBase\"]))\n","db_vacancies.save_local(folder_path=path_db_faiss, index_name='db_vacancies')\n","\n","# Создание и сохранение векторной базы резюме для последующего релевантного поиска\n","db_resumes = FAISS.from_documents(chunks_resumes, OpenAIEmbeddings())\n","db_resumes.save_local(folder_path=path_db_faiss, index_name='db_resumes')"],"metadata":{"id":"pZFdUMlXC5YH","executionInfo":{"status":"aborted","timestamp":1760006579591,"user_tz":-180,"elapsed":17443,"user":{"displayName":"летучая мыш нет","userId":"15606522630716566801"}}},"execution_count":null,"outputs":[]}],"metadata":{"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.6.13"},"colab":{"provenance":[{"file_id":"1YCvL0fi9VerygSM6SA_DQ_H6EJ-008ad","timestamp":1759997671549}]}},"nbformat":4,"nbformat_minor":0}